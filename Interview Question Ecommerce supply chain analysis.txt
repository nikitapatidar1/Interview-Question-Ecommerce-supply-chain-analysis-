import numpy as np
import pandas as pd
import plotly.express as px
import plotly.graph_objects as go
import plotly.io as pio

data = pd.read_csv(r'C:\Users\patid\Desktop\Python\python day 29 supply_chain_data.csv ')
print(data)
a = data.describe()
print(a)

# RELATION BETWEEN THE PRICE OF PRODUCT AND REVENGE GENERATED BY THEM

fig = px.scatter(data, x = 'Price',
                y = 'Revenue generated',
                color = 'Product type',
                hover_data = ['Number of products sold'],
                trendline = "ols")

fig.show()

'''sales_data = data.groupby ('Product type')('Number of products sold').sum().reset_index()
pie chart = px.pie(sales_data, values = 'Number of products sold',
                   names = 'Product type',
                   title = 'Sales by product Type',
                  hover_data = ['Number of products sold'],
                  hole = 0.5,
                  color_descrete_sequence = px.colors.qualitative.Pastel)
pie_chart.update_traces(textposition='inside', textinfo = 'percent+label')


pie_chart.show()'''


# total revenue generated from shipping carriers

total_revenue = data.groupby('Shipping carriers')['Revenue generated'].sum().reset_index()
fig = go.Figure()
fig.add_trace(go.Bar(x = total_revenue['Shipping carriers'],
                     y = total_revenue['Revenue generated']))
fig.update_layout(title = 'Total Revenue by Shipping Carrier',
                 xaxis_title = 'Shipping Carrier',
                 yaxis_title = 'Revenue Generated')
fig.show()

revenue_chart = px.line(data, x = 'SKU',
                        y = 'Revenue generated',
                        title = 'Revenue generated by coloumn')
revenue_chart.show()


Shipping_cost_chart = px.bar(data, x = 'Shipping carriers',
                             y = 'Shipping costs',
                             title = 'Shipping cost by Carriers')
Shipping_cost_chart.show()

Transportation_chart = px.pie(data, values = 'Costs',
                              names = 'Transportation modes',
                              title = ' Cost distribution by transportation mode',
                              hole = 0.5,
                              color_discrete_sequence= px.colors.qualitative.Pastel)
Transportation_chart.show()



defect_rates_by_products = data.groupby('Product type')['Defect rates'].mean().reset_index()
print(defect_rates_by_products)
fig = px.bar(defect_rates_by_products, 
             x = 'Product type',
             y = 'Defect rates',
             title = 'Average defect rate by product'
             )
fig.show()
